\definecolor{shadecolor}{rgb}{0.9,0.9,0.9}
\definecolor{titlecolor}{rgb}{0.3,0.3,0.3}
\definecolor{titleborder}{rgb}{0.6,0.6,0.6}
\usepackage{framed}



\usepackage{listings}
\lstset{basicstyle=\ttfamily,breaklines=true}
\definecolor{lightblue}{HTML}{006699}
\definecolor{lightgreen}{HTML}{669900}
\definecolor{bluegreen}{HTML}{33997e}

\lstset{
    keywordstyle=\color{lightblue}\bfseries,
    identifierstyle=\color{black},
    commentstyle=\color{bluegreen}\ttfamily,
    stringstyle=\color{lightgreen}\ttfamily,
    showstringspaces=false,
    upquote=true
}

\lstdefinelanguage{docker}{
    keywords={FROM, RUN, COPY, ADD, ENTRYPOINT, CMD,  ENV, ARG, WORKDIR, EXPOSE, LABEL, USER, VOLUME, STOPSIGNAL, ONBUILD, MAINTAINER},
    sensitive=false,
    comment=[l]{\#},
    morestring=[b]',
    morestring=[b]"
}

\lstdefinelanguage{shell}{
    otherkeywords={>>},
    sensitive=false,
    comment=[l]{\#},
    morestring=[b]',
    morestring=[b]"
}

\lstdefinelanguage{lambda}{
  morekeywords={
    if,then,else,fix
  },
  morekeywords={[2]int},
  otherkeywords={:},
  literate={
    {->}{{$\to$}}{2}
    {lambda}{{$\lambda$}}{1}
    {type}{{$\tau$}}{1}
  },
  keepspaces,
  mathescape,
}

\lstdefinelanguage{terraform}{
    basicstyle=\normalfont\ttfamily,
    keywords = [2]{resource, string, enum, list},
    showstringspaces=false,
    breaklines=true,
    morecomment=[l]{\#},
    morestring=[b]",
}

\lstdefinelanguage{javascript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]",
}

\lstdefinestyle{clang}{
    commentstyle=\color{bluegreen},
    keywordstyle=\color{lightblue},
    stringstyle=\color{lightgreen},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    language=C
}


\lstdefinestyle{python}{
    commentstyle=\color{bluegreen},
    keywordstyle=\color{lightblue},
    stringstyle=\color{lightgreen},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    language=python
}

\usepackage{xifthen}

\newcommand{\codeheader}[2][]{
    \ifthenelse{\isempty{#2}}{}{
        \setlength{\FrameSep}{3pt}
        {\hspace{-3pt}\ttfamily\color{titlecolor} \shaded >> cat #2 \endshaded}
    }
    \lstset{
        numbers=left,
        numberstyle=\ttfamily\tiny\color{gray},
        numberblanklines=false,
        #1
    }\setlength{\FrameSep}{3pt}
    \ifthenelse{\isempty{#2}}{}{
        \vspace{-\baselineskip}
        \vspace{-\baselineskip}
    }
}

\lstnewenvironment{code}[2][]{
    \codeheader[#1]{#2}
    \shaded}
    {\endshaded}

\newcommand{\codefile}[3][]{
    \codeheader[]{#2}
    \shaded
    \lstinputlisting[#1]{#3}
    \endshaded
}

\newcommand{\codeline}[3][]{
    \codeheader[]{#2}
    \shaded
    \lstinline[#1]{#3}
    \endshaded
}
